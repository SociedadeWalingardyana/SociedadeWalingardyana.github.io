<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="titulo-pagina">Sua Biblioteca</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-black text-white p-8 min-h-screen flex flex-col items-center">

  <h1 id="titulo-principal" class="text-3xl font-bold mb-6">Sua Biblioteca</h1>
  <p id="texto-aviso" class="mb-8">Aqui estar√£o as obras digitais que voc√™ j√° comprou.</p>

  <!-- √Årea do PDF -->
  <div id="area-compendio" class="w-full max-w-4xl hidden">
    <h2 class="text-xl font-semibold mb-4 text-green-400">üìñ Comp√™ndio (PDF)</h2>

    <!-- Leitor PDF -->
    <iframe
      src="livros/Compendio.pdf#toolbar=0"
      width="100%"
      height="600px"
      class="rounded border border-white"
    ></iframe>
  </div>

  <!-- Caso ainda n√£o tenha comprado -->
  <div id="mensagem-aviso" class="text-center text-yellow-400">
    <p>Voc√™ ainda n√£o comprou nenhum conte√∫do digital.</p>
    <p class="mt-2">
      Visite a <a href="loja.html" class="text-blue-400 underline">Loja Oficial</a> para adquirir o seu.
    </p>
  </div>

  <!-- Voltar -->
  <a href="index.html" class="mt-12 text-blue-400 hover:underline">‚Üê Voltar para a p√°gina inicial</a>

  <!-- Bot√£o fixo no canto superior direito -->
  <div id="language-selector" style="
    position: fixed;
    top: 10px;
    right: 10px;
    width: 30px;
    height: 30px;
    background: #1a1a1a;
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  ">
    <span style="color: white; font-size: 16px; user-select: none;">‚ñº</span>
  </div>

  <!-- Lista que vai abrir ao clicar -->
  <ul id="language-list" style="
    position: fixed;
    top: 45px;
    right: 10px;
    width: 120px;
    max-height: 150px;
    overflow-y: auto;
    background: #222;
    border: 1px solid #ccc;
    border-radius: 5px;
    list-style: none;
    padding: 5px 0;
    margin: 0;
    display: none;
    z-index: 9999;
  ">
    <li style="padding: 8px 12px; color: white; cursor: pointer; user-select: none;">Portugu√™s</li>
    <li style="padding: 8px 12px; color: white; cursor: pointer; user-select: none;">Espa√±ol</li>
    <li style="padding: 8px 12px; color: white; cursor: pointer; user-select: none;">English</li>
  </ul>

  <script>
    // Tradu√ß√µes para os textos principais
    const traducoes = {
      pt: {
        "titulo-pagina": "Sua Biblioteca",
        "titulo-principal": "Sua Biblioteca",
        "texto-aviso": "Aqui estar√£o as obras digitais que voc√™ j√° comprou.",
        "aviso-nao-comprado": "Voc√™ ainda n√£o comprou nenhum conte√∫do digital.",
        "visite-loja": "Visite a",
        "para-adquirir": "para adquirir o seu.",
        "voltar-inicio": "‚Üê Voltar para a p√°gina inicial"
      },
      en: {
        "titulo-pagina": "Your Library",
        "titulo-principal": "Your Library",
        "texto-aviso": "Here you will find the digital works you have already purchased.",
        "aviso-nao-comprado": "You have not purchased any digital content yet.",
        "visite-loja": "Visit the",
        "para-adquirir": "to get yours.",
        "voltar-inicio": "‚Üê Back to the home page"
      },
      es: {
        "titulo-pagina": "Tu Biblioteca",
        "titulo-principal": "Tu Biblioteca",
        "texto-aviso": "Aqu√≠ estar√°n las obras digitales que ya has comprado.",
        "aviso-nao-comprado": "A√∫n no has comprado ning√∫n contenido digital.",
        "visite-loja": "Visita la",
        "para-adquirir": "para adquirir la tuya.",
        "voltar-inicio": "‚Üê Volver a la p√°gina principal"
      }
    };

    const selector = document.getElementById('language-selector');
    const list = document.getElementById('language-list');

    selector.addEventListener('click', () => {
      if (list.style.display === 'none' || list.style.display === '') {
        list.style.display = 'block';
      } else {
        list.style.display = 'none';
      }
    });

    // Fechar a lista se clicar fora
    document.addEventListener('click', (e) => {
      if (!selector.contains(e.target) && !list.contains(e.target)) {
        list.style.display = 'none';
      }
    });

    function setLanguage(lang) {
      const t = traducoes[lang];
      if (!t) return;

      // T√≠tulo da aba
      const tituloPagina = document.getElementById('titulo-pagina');
      if (tituloPagina) tituloPagina.textContent = t["titulo-pagina"];

      // Textos na p√°gina
      for (const id in t) {
        if (id === "titulo-pagina") continue; // j√° tratado
        const el = document.getElementById(id);
        if (el) el.textContent = t[id];
      }

      localStorage.setItem("idioma", lang);
    }

    // Atualiza texto do aviso na div "mensagem-aviso"
    function atualizarAviso() {
      const avisoDiv = document.getElementById('mensagem-aviso');
      if (!avisoDiv) return;

      const lang = localStorage.getItem("idioma") || "pt";
      const t = traducoes[lang];

      avisoDiv.innerHTML = `
        <p>${t["aviso-nao-comprado"]}</p>
        <p class="mt-2">${t["visite-loja"]} <a href="loja.html" class="text-blue-400 underline">Loja Oficial</a> ${t["para-adquirir"]}</p>
      `;
    }

    // Inicializa com o idioma salvo ou padr√£o pt
    window.onload = () => {
      const lang = localStorage.getItem("idioma") || "pt";
      setLanguage(lang);
      atualizarAviso();
    };

    // Evento de clique na lista para mudar idioma
    list.querySelectorAll('li').forEach((li) => {
      li.addEventListener('click', () => {
        let langCode = '';
        switch (li.textContent) {
          case 'Portugu√™s':
            langCode = 'pt';
            break;
          case 'Espa√±ol':
            langCode = 'es';
            break;
          case 'English':
            langCode = 'en';
            break;
        }
        setLanguage(langCode);
        atualizarAviso();
        list.style.display = 'none';
      });
    });

    // Verifica se o usu√°rio j√° comprou o comp√™ndio digital
    const produtosComprados = JSON.parse(localStorage.getItem('produtosComprados') || '[]');
    if (produtosComprados.includes('compendio')) {
      document.getElementById('area-compendio').classList.remove('hidden');
      document.getElementById('mensagem-aviso').classList.add('hidden');
    }
  </script>

</body>
</html>
